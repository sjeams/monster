{"version":3,"sources":["assets\\commonjs\\alert.js"],"names":["tipAlert","_alert","_animSpeed","show","tipStr","leftStr","rightStr","callback","cc","loader","loadRes","Prefab","error","prefab","instantiate","director","getScene","addChild","find","getComponent","Label","string","on","event","dismiss","parent","startFadeIn","setScale","opacity","cbFadeIn","callFunc","onFadeInFinish","actionFadeIn","sequence","spawn","fadeTo","scaleTo","runAction","cbFadeOut","onFadeOutFinish","actionFadeOut","onDestroy","removeFromParent","module","exports"],"mappings":"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","sourceRoot":"/","sourcesContent":["// //引入alert    \r\n// let alert = require('alert');\r\n\r\n// //弹窗调用\r\n// alert.show.call(this, \"确认退出游戏？\", \"取消\", \"确认\", function (type) {\r\n//    if (type == \"取消\") {\r\n//        console.log(\"取消\");\r\n//    }\r\n//    if (type == \"确认\") {\r\n//        console.log(\"确认\");\r\n//    }\r\n// });\r\n\r\n\r\n\r\nlet tipAlert = {\r\n    _alert: null,           //prefab\r\n    _animSpeed: 0.3,        //弹窗动画速度\r\n};\r\n \r\n/**\r\n * @param tipStr\r\n * @param leftStr\r\n * @param rightStr\r\n * @param callback\r\n */\r\nlet show = function (tipStr,leftStr,rightStr,callback) {\r\n    cc.loader.loadRes(\"alert/tipAlert\",cc.Prefab, function (error, prefab){\r\n        if (error){\r\n            cc.error(error);\r\n            return;\r\n        }\r\n        tipAlert._alert = cc.instantiate(prefab);\r\n        cc.director.getScene().addChild(tipAlert._alert,3);\r\n        cc.find(\"tipAlert/content/top/tip\").getComponent(cc.Label).string = tipStr;\r\n        cc.find(\"tipAlert/content/bottom/left_btn/leftbtn\").getComponent(cc.Label).string = leftStr;\r\n        cc.find(\"tipAlert/content/bottom/right_btn/rightbtn\").getComponent(cc.Label).string = rightStr;\r\n        if(callback){\r\n            cc.find(\"tipAlert/content/bottom/left_btn\").on('click', function (event) {\r\n                dismiss();\r\n                callback(leftStr);\r\n            }, this);\r\n \r\n            cc.find(\"tipAlert/content/bottom/right_btn\").on('click', function (event) {\r\n                dismiss();\r\n                callback(rightStr);\r\n            }, this);\r\n        }\r\n        //设置parent 为当前场景的Canvas ，position跟随父节点\r\n        tipAlert._alert.parent = cc.find(\"Canvas\");\r\n        startFadeIn();\r\n    });\r\n};\r\n \r\n// 执行弹进动画\r\nlet startFadeIn = function () {\r\n    //动画\r\n    tipAlert._alert.setScale(2);\r\n    tipAlert._alert.opacity = 0;\r\n    let cbFadeIn = cc.callFunc(onFadeInFinish, this);\r\n    let actionFadeIn = cc.sequence(cc.spawn(cc.fadeTo(tipAlert._animSpeed, 255), cc.scaleTo(tipAlert._animSpeed, 1.0)), cbFadeIn);\r\n    tipAlert._alert.runAction(actionFadeIn);\r\n};\r\n \r\n \r\n// 弹进动画完成回调\r\nlet onFadeInFinish = function () {\r\n};\r\n \r\n// 执行弹出动画\r\nlet dismiss = function () {\r\n    if (!tipAlert._alert) {\r\n        return;\r\n    }\r\n    let cbFadeOut = cc.callFunc(onFadeOutFinish, this);\r\n    let actionFadeOut = cc.sequence(cc.spawn(cc.fadeTo(tipAlert._animSpeed, 0), cc.scaleTo(tipAlert._animSpeed, 2.0)), cbFadeOut);\r\n    tipAlert._alert.runAction(actionFadeOut);\r\n};\r\n \r\n// 弹出动画完成回调\r\nlet onFadeOutFinish = function () {\r\n    onDestroy();\r\n};\r\n \r\nlet onDestroy = function () {\r\n    if (tipAlert._alert != null) {\r\n        tipAlert._alert.removeFromParent();\r\n        tipAlert._alert = null;\r\n    }\r\n};\r\n \r\nmodule.exports={\r\n  show\r\n};"]}